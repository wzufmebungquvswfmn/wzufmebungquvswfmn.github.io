# Rust 结构体

Rust 常见有三种结构体：普通结构体、元组结构体、单元结构体。下面依次补全定义、创建实例和常用操作。
Rust 为结构体实现了自动解引用，当一个结构体被引用时，为了访问它的成员或方法，无需像C语言那样 p->member,只需使用p.member，它等价于(*p).member

## 1. 普通结构体（Regular Struct）

### 定义
```rust
struct ColorRegularStruct {
    red: u8,
    green: u8,
    blue: u8,
}
```

### 创建实例
```rust
let green = ColorRegularStruct {
    red: 0,
    green: 255,
    blue: 0,
};
```

### 访问字段
```rust
let g = green.green;
```

### 可变实例与修改字段
```rust
let mut color = ColorRegularStruct {
    red: 255,
    green: 255,
    blue: 255,
};
color.red = 0;
```

### 结构体更新语法
```rust
let base = ColorRegularStruct {
    red: 10,
    green: 20,
    blue: 30,
};

let another = ColorRegularStruct {
    red: 0,
    ..base
};
```

> 注意：使用 `..base` 之后，`base` 中被“移动”的字段将不可再用（取决于字段类型是否实现 `Copy`）。

---

## 2. 元组结构体（Tuple Struct）

### 定义
```rust
struct ColorTupleStruct(u8, u8, u8);
```

### 创建实例
```rust
let green = ColorTupleStruct(0, 255, 0);
```

### 访问字段
```rust
let g = green.1;
```

---

## 3. 单元结构体（Unit Struct / 空结构体）

### 定义
```rust
struct UnitStruct;
```

### 创建实例
```rust
let unit = UnitStruct;
```

### 常见用途
- 作为“类型标记”（type marker）
- 实现 trait 而不需要存储数据

---

## 4. 结构体方法与关联函数（补充）

### 定义方法
```rust
impl ColorRegularStruct {
    fn is_green(&self) -> bool {
        self.red == 0 && self.green == 255 && self.blue == 0
    }
}
```

### 关联函数（类似静态方法）
```rust
impl ColorRegularStruct {
    fn green() -> Self {
        Self { red: 0, green: 255, blue: 0 }
    }
}
```

### 使用
```rust
let c = ColorRegularStruct::green();
let ok = c.is_green();
```
