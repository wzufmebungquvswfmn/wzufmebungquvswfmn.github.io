# 这里列举常用的模式匹配形式
1. 匹配命名变量
 
    ```rust
    fn main() {
        let x = Some(5);
        let y = 10;

        match x {
            Some(50) => println!("Got 50"),
            Some(y) => println!("Matched, y = {:?}", y),
            _ => println!("Default case, x = {:?}", x),
        }

        println!("at the end: x = {:?}, y = {:?}", x, y);
    }
    ```
    例子里y会遇上变量遮蔽，因而 x 会匹配到Some(y)
    ```output
    Matched, y = 5
    at the end: x = Some(5), y = 10
    ```


2. 单分支多模式
    
    ```rust
    fn main() {
        let x = 1;
        match x {
            1 | 2 => println!("one or two"),
            _ => println!("other")
        }
    }
    ```
    使用 | 可以在一个分支中匹配多个模式

3. 范围匹配
    ```rust
        let a = 'c';
        match a {
            'a'..='j' => println!("early ASCII letter"),
            'k'..='z' => println!("late ASCII letter"),
            _ => println!("something else"),
        }
    ```
    使用 ..= 可以匹配一个闭区间

4. 解构结构体
    ```rust
    struct Point {
        x: i32,
        y: i32,
    }

    fn main() {
        let p = Point { x: 0, y: 7 };
        match p {
            Point { x, y: 0 } => println!("On the x axis at {}", x),
            
            Point { x: 0, y } => println!("On the y axis at {}", y),
            
            Point { x, y } => println!("On neither axis: ({}, {})", x, y),
        }
    }
    ```

    ```output
    On the y axis at 7
    ```

5. 多级匹配
    ```rust
    enum Color {
    Rgb(i32, i32, i32),
    Hsv(i32, i32, i32),
    }

    enum Message {
        Quit,
        Move { x: i32, y: i32 },
        Write(String),
        ChangeColor(Color),
    }

    fn main() {
        let msg = Message::ChangeColor(Color::Hsv(0, 160, 255));

        match msg {
            Message::ChangeColor(Color::Rgb(r, g, b)) => println!(
                "Change the color to red {}, green {}, and blue {}",
                r, g, b
            ),
            Message::ChangeColor(Color::Hsv(h, s, v)) => println!(
                "Change the color to hue {}, saturation {}, and value {}",
                h, s, v
            ),
            _ => (),
        }
    }
    ```

6. 数组结构
    ```rust
    let arr: &[u16] = &[114, 514];

    if let [x, ..] = arr {
        assert_eq!(x, &114);
    }
    ```
    以上展示了不定长数组的解构

7. _ 占位符 或者 .. 占位符

    忽略匹配值并且不绑定
    ```rust
    fn foo(_: i32, y: i32) ;
    ```
    ```rust
    let numbers = (2, 4, 8, 16, 32);
    match numbers {
        (first, _, third, _, fifth) => {
            println!("Some numbers: {}, {}, {}", first, third, fifth)
        },
    }
    ```
    在必要时绑定，用来避免"未使用变量"的 WARNING 
    ```rust
    fn main() {
        let _x = 5; // x不会出现未使用警告,但是x绑定了5
        let y = 10; // y会被警告
    }
    ```

8. 匹配守卫
    
    在模式匹配后添加一个if表达式，可以进一步过滤分支

9. @ 绑定

    我们可以使用范围匹配进行快速过滤，但是为了拿到范围内的值，我们需要使用@绑定
    ```rust
    fn main() {
        let age = 21;

        match age {
            exact_age @ 18..=29 => println!("age is {}", exact_age),
            _ => println!("age is {}", age),
        }
    }
    ```
    更常见的用法是匹配结构体字段或枚举内部数据，如：
    ```rust
    struct User {
        id: u32,
        age: u32,
    }

    fn main() {
        let user = User { id: 1, age: 25 };

        match user {
            User { id: 3..=7, .. } => println!("ID 在 3 到 7 之间"),
            User {
                age: a @ 18..=30, // 使用 a 来获取 age 的值
                ..
            } => println!("用户是青年，具体岁数是: {}", a), 

            User { .. } => println!("其他用户"),
        }
    }
    ```


    

