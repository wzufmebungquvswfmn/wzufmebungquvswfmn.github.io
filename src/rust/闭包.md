# 闭包
本节简单介绍闭包概念和它的三类型
## 闭包
闭包类似于函数，不同之处在于，除了传入的参数之外，其还可以捕获环境中的变量：  
```rust
let a = 12345; // 环境中的变量
let b = 54321; // 传入的参数
let func = |x|{println!("env_var: {a}\nparameter: {x}");};
func(b);
```
```
env_var: 12345
parameter: 54321
```
## 根据闭包对``捕获变量的所有权``的处理权限，可将闭包分为以下三类：  
- Fn:   
  仅能对捕获的变量执行不可变借用，也就是只读，因而可以调用无限次
- FnMut:   
  可以对捕获的变量最大执行可变借用，也就是可读可写，也可以调用无限次
- FnOnce:  
  权力最大，可拿走捕获的变量的所有权，只能调用一次
要注意的几点是：
1. 闭包分类的 **唯一依据** 是 *闭包对捕获的变量所有权的权限大小*
2. 三种类型并不是并列关系，而是包含关系，从权限上来说Fn ⊂ FnMut ⊂ FnMut；因此一个Fn类型的闭包也是FnMut和FnOnce的
3. 闭包的类型由**编译器自动推断**，遵循*最小特权原则*，也就是默认是最小不可变借用，若是必须采用Move而不是Copy，那么必须给予更大权限
4. 闭包前添加move会将捕获的变量以函数参数同样的方式进行处理
